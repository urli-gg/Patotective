<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Robot Salvaje: Salva el Pato</title>
    <link
      href="https://fonts.googleapis.com/css?family=Montserrat:400,700&display=swap"
      rel="stylesheet"
    />
    <style>
      /* -------------------------
         TU CSS EXISTENTE (sin cambios)
         ------------------------- */
      body {
        font-family: "Montserrat", Arial, sans-serif;
        background: linear-gradient(130deg, #e2eafc 0%, #f8f8fb 55%, #fff 100%);
        color: #313a4e;
        margin: 0;
      }
      nav {
        display: flex;
        justify-content: center;
        align-items: center;
        background: linear-gradient(90deg, #213a50 80%, #3d5c77 100%);
        box-shadow: 0 2px 18px rgba(46, 84, 114, 0.13);
        position: sticky;
        top: 0;
        z-index: 10;
      }
      nav a {
        color: #fff;
        text-decoration: none;
        padding: 18px 38px 16px 38px;
        font-weight: 700;
        letter-spacing: 1px;
        font-size: 1.05em;
        border-bottom: 3px solid transparent;
        transition: background 0.2s, border-color 0.3s;
        border-radius: 6px 6px 0px 0px;
      }
      nav a:hover,
      nav a:focus {
        background: #284664;
        border-bottom: 3px solid #00b5e4;
        color: #00b5e4;
      }
      .section {
        max-width: 980px;
        margin: 38px auto 0 auto;
        padding: 32px 5% 24px 5%;
        background: #fff;
        border-radius: 20px;
        box-shadow: 0 6px 36px rgba(46, 84, 114, 0.1),
          0 2px 10px rgba(46, 84, 114, 0.05);
        position: relative;
        overflow: hidden;
        margin-bottom: 36px;
      }
      .section::before {
        content: "";
        position: absolute;
        left: -30px;
        top: -40px;
        width: 120px;
        height: 120px;
        border-radius: 50%;
        background: radial-gradient(circle, #e9f1ff 45%, #b0dcfd33 100%);
        opacity: 0.3;
        z-index: 0;
      }
      .section img {
        border-radius: 16px;
        box-shadow: 0 2px 18px rgba(46, 84, 114, 0.09);
        margin-bottom: 18px;
        border: 4px solid #e2eafc;
        transition: transform 0.15s;
      }
      .section img:hover {
        transform: scale(1.035);
        border-color: #00b5e4;
      }
      h1 {
        color: #1976d2;
        font-size: 2.15em;
        margin-top: 0;
        text-shadow: 0 2px 20px #e2eafc;
        letter-spacing: 1.5px;
      }
      h2 {
        margin-top: 8px;
        margin-bottom: 14px;
        color: #1a3970;
        font-size: 1.55em;
      }
      h3 {
        color: #0097a7;
        font-size: 1.17em;
        margin-top: 16px;
        margin-bottom: 7px;
        font-weight: 700;
      }
      .roles-img,
      .map-img,
      .diagram-img {
        display: block;
        margin: 32px auto 18px auto;
        max-width: 350px;
        width: 98%;
      }
      .gallery-img {
        max-width: 230px;
        margin: 14px 20px 14px 0px;
        display: inline-block;
        vertical-align: top;
        background: #f6faff;
        box-shadow: 0 2px 18px rgba(46, 84, 114, 0.07);
      }
      .gallery {
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-start;
        gap: 16px;
        margin-top: 18px;
        margin-bottom: 18px;
      }
      .tutorial-table {
        width: 100%;
        border-collapse: collapse;
        margin: 18px 0;
        background: #f4f8fc;
        box-shadow: 0 1px 9px rgba(46, 84, 114, 0.04);
        border-radius: 12px;
        overflow: hidden;
        font-size: 1em;
      }
      .tutorial-table th,
      .tutorial-table td {
        border: 1px solid #e2eafc;
        padding: 8px 14px;
        text-align: left;
      }
      .tutorial-table th {
        background: #eafffa;
        color: #1976d2;
      }
      .tutorial-table tr td:first-child {
        font-weight: 600;
        color: #1976d2;
      }
      .prototipo-img {
        max-width: 270px;
      }
      .acerca-icon {
        font-size: 1.45em;
        color: #0097a7;
        margin-right: 7px;
        vertical-align: text-bottom;
      }
      .acerca-block {
        display: flex;
        gap: 16px;
        margin-bottom: 13px;
        align-items: flex-start;
      }
      .acerca-block strong {
        color: #1976d2;
      }
      .acerca-team {
        background: #f2fbff;
        border-radius: 13px;
        box-shadow: 0 1px 7px rgba(46, 84, 114, 0.08);
        padding: 15px 20px;
        margin-top: 8px;
        margin-bottom: 16px;
      }
      .acerca-team-title {
        color: #0097a7;
        margin-bottom: 8px;
        font-weight: 700;
        font-size: 1.07em;
        letter-spacing: 0.5px;
      }

      /* -------------------------
         CSS DEL JUEGO (encapsulado)
         TODO dentro de .game-wrapper para evitar colisiones
         ------------------------- */
      .game-wrapper {
        --bg: #0f1724;
        --card: #0b1220;
        --accent: #f59e0b;
        --muted: #94a3b8;
        --tile-plain: #9ad3a3;
        --tile-forest: #6aa84f;
        --tile-water: #6ec5ff;
        --tile-mountain: #b8b8b8;
        --tile-hide: #f0d9b5;
        margin-bottom: 20px;
      }
      .game-wrapper .game-card {
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.02),
          rgba(255, 255, 255, 0.01)
        );
        padding: 16px;
        border-radius: 14px;
        box-shadow: 0 6px 18px rgba(2, 6, 23, 0.35);
      }
      .game-wrapper .wrap-game {
        max-width: 1000px;
        margin: 8px auto 0 auto;
        padding: 10px;
      }
      .game-wrapper header {
        display: flex;
        gap: 12px;
        align-items: center;
        margin-bottom: 8px;
      }
      .game-wrapper header img.logo {
        width: 64px;
        height: 64px;
        object-fit: cover;
        border-radius: 10px;
        border: 2px solid rgba(255, 255, 255, 0.06);
      }
      .game-wrapper h2 {
        margin: 0;
        color: #fff;
        font-size: 20px;
      }
      .game-wrapper .subtitle {
        color: var(--muted);
        font-size: 12px;
      }
      .game-wrapper .toprow {
        display: flex;
        gap: 14px;
        margin-top: 12px;
        flex-wrap: wrap;
      }
      .game-wrapper .panel {
        flex: 1;
        min-width: 280px;
      }
      .game-wrapper .left {
        width: 680px;
      }
      .game-wrapper .board {
        display: grid;
        gap: 4px;
        background: transparent;
        padding: 8px;
        border-radius: 10px;
      }
      .game-wrapper .tile {
        width: 56px;
        height: 56px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        box-shadow: inset 0 -6px 10px rgba(0, 0, 0, 0.12);
      }
      .game-wrapper .tile[data-type="plain"] {
        background: var(--tile-plain);
      }
      .game-wrapper .tile[data-type="forest"] {
        background: var(--tile-forest);
      }
      .game-wrapper .tile[data-type="water"] {
        background: var(--tile-water);
      }
      .game-wrapper .tile[data-type="mountain"] {
        background: var(--tile-mountain);
      }
      .game-wrapper .tile[data-type="hide"] {
        background: var(--tile-hide);
      }
      .game-wrapper .tile .label {
        position: absolute;
        left: 6px;
        top: 6px;
        font-size: 10px;
        color: #072122;
        font-weight: 600;
      }
      .game-wrapper .piece {
        width: 44px;
        height: 44px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        color: #071022;
        cursor: pointer;
        box-shadow: 0 6px 12px rgba(2, 6, 23, 0.4);
        position: relative;
      }
      .game-wrapper .piece.robot {
        background: linear-gradient(180deg, #e2e8ff, #c7d2fe);
      }
      .game-wrapper .piece.animal {
        background: linear-gradient(180deg, #ffd8c8, #ffb4a2);
      }
      .game-wrapper .piece.pato {
        background: linear-gradient(180deg, #fff1a8, #ffd166);
      }
      .game-wrapper .hud {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }
      .game-wrapper .cardsmall {
        background: rgba(255, 255, 255, 0.02);
        padding: 8px;
        border-radius: 8px;
        min-width: 140px;
        color: #dfe8f8;
      }
      .game-wrapper .controls {
        display: flex;
        gap: 8px;
        margin-top: 8px;
      }
      .game-wrapper button {
        background: var(--accent);
        border: none;
        padding: 6px 8px;
        border-radius: 8px;
        color: #071022;
        font-weight: 700;
        cursor: pointer;
      }
      .game-wrapper button.secondary {
        background: transparent;
        border: 1px solid rgba(255, 255, 255, 0.06);
        color: var(--muted);
      }
      .game-wrapper .log {
        max-height: 180px;
        overflow: auto;
        padding: 8px;
        background: rgba(0, 0, 0, 0.12);
        border-radius: 8px;
        font-size: 13px;
        color: #dfe8f8;
      }
      .game-wrapper .selected {
        outline: 3px solid rgba(245, 158, 11, 0.25);
        transform: translateY(-2px);
      }
      .game-wrapper .highlight {
        box-shadow: inset 0 0 0 3px rgba(255, 255, 255, 0.06);
      }
      .game-wrapper .info {
        font-size: 12px;
        color: var(--muted);
        line-height: 1.3;
      }
      .game-wrapper .piecesummary {
        display: flex;
        align-items: center;
        gap: 8px;
        color: #fff;
      }
      .game-wrapper footer {
        margin-top: 8px;
        color: var(--muted);
        font-size: 12px;
        text-align: center;
      }
      @media (max-width: 880px) {
        .game-wrapper .tile {
          width: 44px;
          height: 44px;
        }
        .game-wrapper .left {
          width: auto;
        }
        .game-wrapper .toprow {
          flex-direction: column;
        }
      }
    </style>
  </head>

  <body>
    <nav>
      <a href="#inicio">Inicio</a>
      <a href="#historia">Historia</a>
      <a href="#mecanicas">Mec√°nicas</a>
      <a href="#acerca">Acerca</a>
    </nav>

    <!-- ========== SECCI√ìN INICIO (AQU√ç INSERT√â EL JUEGO) ========== -->
    <section class="section" id="inicio">
      <!-- Game wrapper inserted at top of inicio -->
      <div
        class="game-wrapper game-card wrap-game"
        aria-label="Juego Robot Salvaje"
      >
        <header>
          <img class="logo" src="../assets/roles.jpg" alt="roles" />
          <div>
            <h2>Robot Salvaje ‚Äî Salva el Pato (Juego)</h2>
            <div class="subtitle">
              Juego local ‚Äî controla animales o robots. Turnos: 20.
            </div>
          </div>
        </header>

        <div class="toprow">
          <div class="panel left">
            <div
              style="
                display: flex;
                gap: 12px;
                align-items: center;
                justify-content: space-between;
              "
            >
              <div>
                <strong style="color: #fff">Tablero</strong>
                <div class="info">
                  Haz clic en una ficha para seleccionarla. Mueve, ataca o usa
                  habilidad.
                </div>
              </div>
              <div class="hud">
                <div class="cardsmall">
                  <div>Turno: <strong id="board_turnoText">1</strong> / 20</div>
                  <div>
                    Jugador actual:
                    <strong id="board_currentSide">Animales</strong>
                  </div>
                </div>
                <div class="cardsmall">
                  <div>
                    Acciones por turno:
                    <strong id="board_actionsLeft">1</strong>
                  </div>
                  <div>Dado: <strong id="board_diceResult">‚Äî</strong></div>
                </div>
              </div>
            </div>

            <hr style="border: none; height: 8px" />

            <div id="boardContainer" style="display: flex; gap: 12px">
              <div id="board" class="board" aria-hidden="false"></div>
              <div style="width: 220px">
                <div class="cardsmall" style="margin-bottom: 8px">
                  <strong>Ficha seleccionada</strong>
                  <div id="selectedInfo" style="margin-top: 6px" class="info">
                    Ninguna
                  </div>
                  <div class="controls" style="margin-top: 8px">
                    <button id="btnMove" class="secondary">Mover</button>
                    <button id="btnAbility" class="secondary">Habilidad</button>
                    <button id="btnAttack" class="secondary">Atacar</button>
                  </div>
                </div>

                <div class="cardsmall" style="margin-bottom: 8px">
                  <strong>Controles</strong>
                  <div
                    style="
                      margin-top: 8px;
                      display: flex;
                      flex-direction: column;
                      gap: 6px;
                    "
                  >
                    <button id="endTurn">Finalizar turno</button>
                    <button id="resetGame" class="secondary">
                      Reiniciar juego
                    </button>
                  </div>
                </div>

                <div class="cardsmall">
                  <strong>Reglas r√°pidas</strong>
                  <div class="info" style="margin-top: 6px">
                    Robots: 2 casillas llanas / 1 bosque/monta√±a. Animales: 3
                    (Zorro 4). Pato: 1 (3 en agua). Ataque: d6, 4-6 √©xito.
                  </div>
                </div>
              </div>
            </div>

            <div style="margin-top: 12px">
              <strong style="color: #fff">Registro</strong>
              <div id="log" class="log"></div>
            </div>
          </div>

          <div class="panel">
            <div style="display: flex; gap: 12px; align-items: center">
              <div style="flex: 1">
                <strong style="color: #fff"
                  >Personajes (vida y habilidad)</strong
                >
                <ul style="margin: 8px 0 0 18px; color: var(--muted)">
                  <li>Oso ‚Äî Vida 2 ‚Äî Ataque: 2 da√±o</li>
                  <li>Pato ‚Äî Vida 1 ‚Äî Mueve 3 en agua; objetivo del juego</li>
                  <li>Alce ‚Äî Vida 2 ‚Äî Mueve hasta 3</li>
                  <li>
                    Zarig√ºeya ‚Äî Vida 2 ‚Äî Evita 1 ataque si es atacada primero
                  </li>
                  <li>Zorro ‚Äî Vida 2 ‚Äî Ataque desde "detr√°s": +1 da√±o</li>
                  <li>
                    Robot Aliado ‚Äî Vida 3 ‚Äî Bloquea 1 ataque cada 3 turnos
                  </li>
                  <li>Robot ‚Äî Vida 3 ‚Äî En monta√±a solo 1 casilla</li>
                </ul>
              </div>

              <div style="width: 150px">
                <img
                  src="../assets/foto1.jpeg"
                  alt="foto"
                  style="
                    width: 150px;
                    border-radius: 10px;
                    display: block;
                    margin-bottom: 8px;
                  "
                />
                <div class="info">
                  Im√°genes referenciales. Coloca tus assets en /assets/
                </div>
              </div>
            </div>

            <hr style="border: none; height: 8px" />

            <div>
              <strong style="color: #fff">C√≥mo jugar</strong>
              <ol style="color: var(--muted); margin-left: 18px">
                <li>Selecciona una ficha (animal o robot).</li>
                <li>
                  Haz clic en <em>Mover</em> y luego en la casilla destino (o en
                  <em>Atacar</em> si hay un enemigo adyacente).
                </li>
                <li>Usa <em>Habilidad</em> cuando aplique.</li>
                <li>Finaliza turno cuando hayas hecho tu acci√≥n.</li>
              </ol>
            </div>
          </div>
        </div>

        <footer>
          Juego local ‚Äî incorpora en tu p√°gina. Usa im√°genes en ../assets/
        </footer>
      </div>

      <!-- ========== AQUI COMIENZA EL CONTENIDO ORIGINAL DE TU SECCI√ìN INICIO ========== -->
      <h1>Robot Salvaje: Salva el Pato</h1>
      <img
        src="../assets/wp.jpeg"
        alt="Portada Robot Salvaje"
        style="width: 100%; max-width: 550px"
      />
      <p>
        Juego web inspirado en la pel√≠cula animada de <b>Robot Salvaje</b>,
        basado en el cl√°sico juego de mesa. <br />
        <span style="color: #0097a7; font-weight: 600"
          >¬°Protege al pato, usa a los animales aliados o juega como robots y
          captura al pato antes que se acabe el tiempo!</span
        >
      </p>
      <!-- ========== FIN DEL INICIO ORIGINAL ========== -->
    </section>

    <!-- ======= RESTO DE LA P√ÅGINA (sin cambios) ======= -->
    <section class="section" id="historia">
      <h2>Historia</h2>
      <p>
        <b>Robot Salvaje: Salva el Pato</b> naci√≥ como un juego de mesa entre
        amigos utilizando tablero f√≠sico y fichas artesanales. <br />
        Posteriormente evolucion√≥ a una versi√≥n digital, digitalizando sus
        reglas y adaptando la est√©tica minimalista basada en la famosa pel√≠cula
        animada. El objetivo principal es rescatar al pato, explorando los
        terrenos de la isla mientras sobrevives contra los robots.
      </p>
      <div class="gallery">
        <img
          src="../assets/IMG_8941.PNG"
          class="gallery-img"
          alt="Diagrama de flujo del juego"
        />
        <img
          src="../assets/foto1.jpeg"
          class="gallery-img prototipo-img"
          alt="Prototipo de tablero f√≠sico"
        />
      </div>
    </section>

    <section class="section" id="mecanicas">
      <h2>Mec√°nicas</h2>
      <h3>Objetivo del juego</h3>
      <ul>
        <li>
          <b>Animales:</b> Proteger al Pato de los robots durante 20 turnos.
        </li>
        <li><b>Robots:</b> Capturar al Pato antes de que termine el tiempo.</li>
      </ul>
      <h3>Preparaci√≥n</h3>
      <ol>
        <li>
          Coloca el mapa de la isla al centro, mostrando bosque, r√≠os, monta√±as
          y escondites.
        </li>
        <li>
          Cada jugador toma su bando y ficha (robot/animal). Robots inician en
          el borde, animales en el centro protegiendo al pato.
        </li>
        <li>Reparte marcadores de vida seg√∫n personaje.</li>
        <li>Entrega cartas de habilidad por personaje.</li>
        <li>El pato inicia en agua o escondite.</li>
      </ol>
      <h3>Turnos y acciones</h3>
      <ul>
        <li>Mover la ficha</li>
        <li>Usar una habilidad especial</li>
        <li>Atacar a un oponente cercano</li>
      </ul>
      <h3>Movimiento</h3>
      <table class="tutorial-table">
        <tr>
          <th>Personaje</th>
          <th>Casillas por turno</th>
          <th>Restricciones</th>
        </tr>
        <tr>
          <td>Robots</td>
          <td>2 en llanos, 1 en bosque/monta√±a</td>
          <td>No en escondite</td>
        </tr>
        <tr>
          <td>Animales</td>
          <td>Hasta 3; Zorro: 4</td>
          <td>Depende del animal</td>
        </tr>
        <tr>
          <td>Pato</td>
          <td>1, pero 3 en agua</td>
          <td>No puede atacar</td>
        </tr>
      </table>
      <h3>Ataque</h3>
      <p>
        Puede atacar si est√° adyacente a un oponente.<br />
        Tira un dado de 6 caras: 4, 5 o 6 es ataque exitoso (<span
          style="color: #e95a5a; font-weight: 700"
          >pierde 1 vida el objetivo</span
        >).
      </p>
      <h3>Habilidades Especiales</h3>
      <img
        src="../assets/roles.jpg"
        class="roles-img"
        alt="Cartas de roles, animales y robots"
      />
      <table class="tutorial-table">
        <tr>
          <th>Personaje</th>
          <th>Vida</th>
          <th>Habilidad</th>
        </tr>
        <tr>
          <td>Oso</td>
          <td>2</td>
          <td>Hace 2 puntos de da√±o en ataque</td>
        </tr>
        <tr>
          <td>Pato</td>
          <td>1</td>
          <td>Se mueve 3 en agua, objetivo a eliminar</td>
        </tr>
        <tr>
          <td>Alce</td>
          <td>2</td>
          <td>Hasta 3 casillas por turno</td>
        </tr>
        <tr>
          <td>Zarig√ºeya</td>
          <td>2</td>
          <td>Esquiva 1 ataque si es atacada primero</td>
        </tr>
        <tr>
          <td>Zorro</td>
          <td>2</td>
          <td>Atacando por detr√°s hace 2 de da√±o</td>
        </tr>
        <tr>
          <td>Robot Aliado</td>
          <td>3</td>
          <td>Bloquea ataque y ataca cada 3 turnos</td>
        </tr>
        <tr>
          <td>Robot</td>
          <td>3</td>
          <td>En monta√±a solo 1 casilla</td>
        </tr>
      </table>
      <h3>Condiciones de victoria</h3>
      <ul>
        <li>
          Robots ganan si capturan al pato antes del turno 20 (10 puntos por
          turno restante por robot).
        </li>
        <li>
          Animales ganan si protegen al pato hasta el turno 20 (10 puntos por
          robot eliminado).
        </li>
        <li>El pato no puede atacar, solo moverse o esconderse.</li>
      </ul>
    </section>

    <section class="section" id="acerca">
      <h2>Acerca del Proyecto</h2>

      <div class="acerca-block">
        <span class="acerca-icon">üé≤</span>
        <div>
          <strong>Fase de Idea y Planificaci√≥n:</strong>
          <br />La creaci√≥n del videojuego comenz√≥ con la definici√≥n del
          proyecto y la selecci√≥n del juego de mesa a digitalizar. Se eligi√≥ la
          pel√≠cula <b>Robot Salvaje</b> como tem√°tica, desarrollando una
          narrativa √∫nica y personajes adaptados al mundo digital.
        </div>
      </div>
      <div class="acerca-block">
        <span class="acerca-icon">üíª</span>
        <div>
          <strong>Construcci√≥n del Repositorio:</strong>
          <br />Se cre√≥ el repositorio en GitHub Pages organizando carpetas y
          documentaci√≥n, con atenci√≥n especial al dise√±o estructural y
          presentaci√≥n visual para facilitar el trabajo en equipo.
        </div>
      </div>
      <div class="acerca-block">
        <span class="acerca-icon">üé®</span>
        <div>
          <strong>Prototipado y Diagramaci√≥n:</strong>
          <br />Se utilizaron herramientas como <b>Figma</b> y diagramas de
          flujo para representar visualmente la mec√°nica de juego y definir los
          procesos de cada turno, mejorando la comprensi√≥n e iteraci√≥n de las
          reglas.
        </div>
      </div>
      <div class="acerca-block">
        <span class="acerca-icon">ü§ñ</span>
        <div>
          <strong>Desarrollo Digital e Inteligencia Artificial:</strong>
          <br />El equipo experiment√≥ con prototipos generados por IA, ayudando
          a crear y depurar el c√≥digo, testear mec√°nicas y construir la
          arquitectura base del videojuego web.
        </div>
      </div>
      <div class="acerca-block">
        <span class="acerca-icon">üåê</span>
        <div>
          <strong>Integraci√≥n Web y Presentaci√≥n:</strong>
          <br />Se dise√±√≥ una p√°gina web minimalista, funcional y visualmente
          atractiva que integra todos los componentes: historia, reglas,
          prototipos e im√°genes originales, logrando una experiencia accesible y
          moderna.
        </div>
      </div>
      <div class="acerca-block">
        <span class="acerca-icon">üë•</span>
        <div>
          <strong>Trabajo en Equipo:</strong>
          <br />La colaboraci√≥n fue esencial: se dividieron tareas desde la
          documentaci√≥n y organizaci√≥n, hasta la programaci√≥n, pruebas de
          interfaz y mejoras creativas. Cada integrante aport√≥ con ideas,
          soluciones t√©cnicas y creatividad.
          <div class="acerca-team">
            <span class="acerca-team-title"
              >Integrantes y actividades principales:</span
            >
            <ul>
              <li>
                Jes√∫s Gael Saucedo Solorzano: gesti√≥n, programaci√≥n,
                documentaci√≥n y pruebas.
              </li>
              <li>
                Colaboradores: dise√±o de prototipos y aporte en la l√≥gica y
                desarrollo de reglas.
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="acerca-block">
        <span class="acerca-icon">‚ú®</span>
        <div>
          <strong>Logros:</strong>
          <br />Se logr√≥ digitalizar un concepto cl√°sico y adaptarlo a una
          plataforma web moderna, utilizando IA y recursos visuales, aprendiendo
          sobre integraci√≥n de herramientas y desarrollo colaborativo.
        </div>
      </div>
    </section>

    <footer
      style="
        text-align: center;
        padding: 22px;
        font-size: 16px;
        color: #213a50;
        background: #e2eafc;
        border-top: 2px solid #dbeaff;
        box-shadow: 0 -2px 12px #cfe6ff1a;
      "
    >
      &copy; 2025 Robot Salvaje - Proyecto Web Semestral
    </footer>

    <!-- =========================
         SCRIPT DEL JUEGO (encapsulado)
         ========================= -->
    <script>
      (function () {
        // Scope root to the game wrapper so selectors don't collide with page.
        const root = document.querySelector(".game-wrapper");
        if (!root) return;

        // Scoped $ and helper to find elements inside root.
        const $ = (sel) => root.querySelector(sel);
        // We will use document.getElementById for tile IDs since they are unique on page.
        const logEl = $("#log");
        function logAppend(txt) {
          state.log.unshift(`${new Date().toLocaleTimeString()} ‚Äî ${txt}`);
          if (logEl)
            logEl.innerHTML = state.log
              .slice(0, 200)
              .map((l) => `<div>${l}</div>`)
              .join("");
        }

        /* ====== Configuraci√≥n y datos ====== */
        const ROWS = 7,
          COLS = 9; // tablero
        const MAX_TURNS = 20;

        // personajes base con vida y etiquetas de habilidad
        const CHARACTER_TEMPLATES = {
          oso: { type: "animal", name: "Oso", hp: 2, ability: "oso" },
          pato: { type: "pato", name: "Pato", hp: 1, ability: "pato" },
          alce: { type: "animal", name: "Alce", hp: 2, ability: "alce" },
          zarigueya: {
            type: "animal",
            name: "Zarig√ºeya",
            hp: 2,
            ability: "zarigueya",
          },
          zorro: { type: "animal", name: "Zorro", hp: 2, ability: "zorro" },
          robotAliado: {
            type: "robot",
            name: "RobotAliado",
            hp: 3,
            ability: "robotAliado",
          },
          robot: { type: "robot", name: "Robot", hp: 3, ability: "robot" },
        };

        // estado del juego
        let state = {
          turno: 1,
          currentSide: "Animales", // 'Animales' o 'Robots'
          actionsLeft: 1,
          dice: null,
          board: [], // tiles
          pieces: {}, // id -> piece
          selected: null,
          log: [],
        };

        /* ====== Utilidades ====== */
        function coordToId(r, c) {
          return `t_${r}_${c}`;
        }
        function shuffleArray(a) {
          for (let i = a.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [a[i], a[j]] = [a[j], a[i]];
          }
          return a;
        }
        function rollDice() {
          return Math.floor(Math.random() * 6) + 1;
        }

        /* ====== Inicializaci√≥n del tablero y fichas ====== */
        function seedBoard() {
          state.board = [];
          for (let r = 0; r < ROWS; r++) {
            const row = [];
            for (let c = 0; c < COLS; c++) {
              let t = "plain";
              if (Math.random() < 0.08) t = "mountain";
              else if (Math.random() < 0.12) t = "forest";
              else if (
                (r === Math.floor(ROWS / 2) &&
                  Math.abs(c - Math.floor(COLS / 2)) <= 1) ||
                Math.random() < 0.07
              )
                t = "water";
              else if (Math.random() < 0.04) t = "hide";
              row.push({ type: t, r, c });
            }
            state.board.push(row);
          }
        }

        function findTileOfTypeNear(type, r0, c0) {
          for (let rad = 0; rad <= 3; rad++) {
            for (let dr = -rad; dr <= rad; dr++) {
              for (let dc = -rad; dc <= rad; dc++) {
                const r = r0 + dr,
                  c = c0 + dc;
                if (
                  r >= 0 &&
                  r < ROWS &&
                  c >= 0 &&
                  c < COLS &&
                  state.board[r][c].type === type
                )
                  return { r, c };
              }
            }
          }
          return null;
        }

        function placeInitialPieces() {
          state.pieces = {};
          let idCounter = 1;
          const centerR = Math.floor(ROWS / 2),
            centerC = Math.floor(COLS / 2);

          // Animals around center: Oso, Pato, Alce, Zarigueya, Zorro
          const animalsOrder = ["oso", "pato", "alce", "zarigueya", "zorro"];
          const animalPositions = [
            [centerR, centerC], // pato center (or water if possible)
            [centerR, centerC - 1],
            [centerR + 1, centerC],
            [centerR, centerC + 1],
            [centerR - 1, centerC],
          ];
          for (let i = 0; i < animalsOrder.length; i++) {
            const tpl = CHARACTER_TEMPLATES[animalsOrder[i]];
            const [r, c] = animalPositions[i];
            const id = "p" + idCounter++;
            state.pieces[id] = {
              id,
              template: animalsOrder[i],
              name: tpl.name,
              kind: tpl.type,
              hp: tpl.hp,
              r,
              c,
              movedThisTurn: false,
              zarigFirstDefenseUsed: false,
            };
            // ensure pato starts in water or hide if possible
            if (animalsOrder[i] === "pato") {
              const tile = state.board[r][c];
              if (tile.type !== "water" && tile.type !== "hide") {
                const found =
                  findTileOfTypeNear("water", r, c) ||
                  findTileOfTypeNear("hide", r, c);
                if (found) {
                  state.pieces[id].r = found.r;
                  state.pieces[id].c = found.c;
                }
              }
            }
          }

          // Robots at edges: put 5 robots (3 normales + 2 aliados)
          const robotsTypes = [
            "robot",
            "robot",
            "robotAliado",
            "robot",
            "robotAliado",
          ];
          const edgePositions = [];
          for (let c = 0; c < COLS; c++) edgePositions.push([0, c]);
          for (let c = 0; c < COLS; c++) edgePositions.push([ROWS - 1, c]);
          for (let r = 1; r < ROWS - 1; r++) {
            edgePositions.push([r, 0]);
            edgePositions.push([r, COLS - 1]);
          }
          shuffleArray(edgePositions);
          for (let i = 0; i < robotsTypes.length; i++) {
            const [r, c] = edgePositions[i];
            const tpl = CHARACTER_TEMPLATES[robotsTypes[i]];
            const id = "p" + idCounter++;
            state.pieces[id] = {
              id,
              template: robotsTypes[i],
              name: tpl.name,
              kind: tpl.type,
              hp: tpl.hp,
              r,
              c,
              movedThisTurn: false,
              allyBlockCounter: 0,
            };
          }
        }

        /* ====== Render UI ====== */
        function renderBoard() {
          const board = $("#board");
          if (!board) return;
          board.style.gridTemplateColumns = `repeat(${COLS}, 1fr)`;
          board.innerHTML = "";
          for (let r = 0; r < ROWS; r++) {
            for (let c = 0; c < COLS; c++) {
              const t = state.board[r][c];
              const tile = document.createElement("div");
              tile.className = "tile";
              tile.dataset.type = t.type;
              tile.id = coordToId(r, c);
              tile.innerHTML = `<div class="label">${t.type[0].toUpperCase()}</div>`;
              tile.addEventListener("click", () => onTileClick(r, c));
              board.appendChild(tile);
            }
          }
          renderPieces();
        }

        function renderPieces() {
          // clear previous pieces inside tiles
          for (let r = 0; r < ROWS; r++)
            for (let c = 0; c < COLS; c++) {
              const el = document.getElementById(coordToId(r, c));
              if (el) el.querySelectorAll(".piece")?.forEach((n) => n.remove());
              if (el) el.classList.remove("highlight");
            }

          for (const id in state.pieces) {
            const p = state.pieces[id];
            const container = document.getElementById(coordToId(p.r, p.c));
            if (!container) continue;
            const div = document.createElement("div");
            div.className =
              "piece " +
              (p.kind === "robot"
                ? "robot"
                : p.template === "pato"
                ? "pato"
                : "animal");
            div.innerText =
              p.template === "pato"
                ? "P"
                : p.kind === "robot"
                ? "R"
                : p.name[0];
            div.title = `${p.name} (HP:${p.hp})`;
            div.dataset.id = id;
            div.addEventListener("click", (e) => {
              e.stopPropagation();
              onPieceClick(id);
            });
            const hpBadge = document.createElement("div");
            hpBadge.style.position = "absolute";
            hpBadge.style.bottom = "6px";
            hpBadge.style.right = "6px";
            hpBadge.style.background = "rgba(0,0,0,0.35)";
            hpBadge.style.color = "#fff";
            hpBadge.style.fontSize = "11px";
            hpBadge.style.padding = "2px 6px";
            hpBadge.style.borderRadius = "8px";
            hpBadge.innerText = p.hp;
            div.appendChild(hpBadge);
            container.appendChild(div);
            if (state.selected && state.selected.id === id)
              div.classList.add("selected");
          }

          const turnoText = $("#board_turnoText");
          const currentSide = $("#board_currentSide");
          const actionsLeft = $("#board_actionsLeft");
          if (turnoText) turnoText.innerText = state.turno;
          if (currentSide) currentSide.innerText = state.currentSide;
          if (actionsLeft) actionsLeft.innerText = state.actionsLeft;
        }

        function updateSelectedInfo() {
          const el = $("#selectedInfo");
          if (!el) return;
          if (!state.selected) {
            el.innerHTML = "Ninguna";
            return;
          }
          const p = state.selected;
          el.innerHTML = `<div class="piecesummary"><strong>${
            p.name
          }</strong><div style="color:var(--muted);font-size:13px">(${
            p.template
          })</div></div>
            <div class="info" style="margin-top:6px">HP: ${p.hp} <br>Pos: (${
            p.r
          },${p.c}) <br>Habilidad: ${
            CHARACTER_TEMPLATES[p.template].ability
          }</div>`;
        }

        /* ====== Interacci√≥n ====== */
        let currentAction = null; // 'move' | 'attack' | 'ability' | null
        function onPieceClick(id) {
          const p = state.pieces[id];
          if (!p) return;
          state.selected = p;
          currentAction = null;
          updateSelectedInfo();
          renderBoard();
          logAppend(
            `Seleccionada ficha: ${p.name} (${p.template}) en ${p.r},${p.c}`
          );
        }

        function onTileClick(r, c) {
          if (currentAction === "move" && state.selected) {
            attemptMove(state.selected.id, r, c);
            return;
          }
          if (currentAction === "attack" && state.selected) {
            attemptAttackOnTile(state.selected.id, r, c);
            return;
          }
          state.selected = null;
          currentAction = null;
          updateSelectedInfo();
          renderBoard();
        }

        // bind buttons scoped inside root
        const btnMove = $("#btnMove"),
          btnAttack = $("#btnAttack"),
          btnAbility = $("#btnAbility"),
          btnEnd = $("#endTurn"),
          btnReset = $("#resetGame");
        if (btnMove)
          btnMove.addEventListener("click", () => {
            if (!state.selected) {
              alert("Selecciona una ficha primero");
              return;
            }
            currentAction = "move";
            highlightMoveOptions(state.selected);
          });
        if (btnAttack)
          btnAttack.addEventListener("click", () => {
            if (!state.selected) {
              alert("Selecciona una ficha primero");
              return;
            }
            currentAction = "attack";
            highlightAttackOptions(state.selected);
          });
        if (btnAbility)
          btnAbility.addEventListener("click", () => {
            if (!state.selected) {
              alert("Selecciona una ficha primero");
              return;
            }
            useAbility(state.selected.id);
          });
        if (btnEnd) btnEnd.addEventListener("click", endTurn);
        if (btnReset)
          btnReset.addEventListener("click", () => {
            if (confirm("Reiniciar juego?")) initGame();
          });

        /* ====== Movimiento y reglas ====== */
        function highlightMoveOptions(piece) {
          clearHighlights();
          const moves = getValidMoves(piece);
          moves.forEach(({ r, c }) => {
            const el = document.getElementById(coordToId(r, c));
            if (el) el.classList.add("highlight");
          });
        }

        function clearHighlights() {
          for (let r = 0; r < ROWS; r++)
            for (let c = 0; c < COLS; c++) {
              const el = document.getElementById(coordToId(r, c));
              if (el) el.classList.remove("highlight");
            }
        }

        function getValidMoves(piece) {
          const max = getMovementRange(piece);
          const res = [];
          for (let dr = -max; dr <= max; dr++) {
            for (let dc = -max; dc <= max; dc++) {
              const r = piece.r + dr,
                c = piece.c + dc;
              if (r < 0 || r >= ROWS || c < 0 || c >= COLS) continue;
              if (Math.abs(dr) + Math.abs(dc) > max) continue;
              const tile = state.board[r][c];
              if (
                Object.values(state.pieces).some((p) => p.r === r && p.c === c)
              )
                continue;
              if (
                piece.template.startsWith("robot") &&
                tile.type === "mountain"
              ) {
                if (max < 1) continue;
              }
              res.push({ r, c });
            }
          }
          return res;
        }

        function getMovementRange(piece) {
          if (piece.template === "pato") {
            const currentTile = state.board[piece.r][piece.c];
            return currentTile.type === "water" ? 3 : 1;
          }
          if (piece.template === "alce") return 3;
          if (piece.template === "zorro") return 4;
          if (piece.kind === "robot") {
            const tile = state.board[piece.r][piece.c];
            if (tile.type === "forest" || tile.type === "mountain") return 1;
            return 2;
          }
          return 3;
        }

        function attemptMove(id, rTo, cTo) {
          if (state.actionsLeft <= 0) {
            alert("No tienes acciones. Finaliza turno.");
            currentAction = null;
            clearHighlights();
            return;
          }
          const p = state.pieces[id];
          if (!p) return;
          const valid = getValidMoves(p).some(
            (m) => m.r === rTo && m.c === cTo
          );
          if (!valid) {
            alert("Movimiento no v√°lido");
            return;
          }
          p.r = rTo;
          p.c = cTo;
          p.movedThisTurn = true;
          state.actionsLeft--;
          logAppend(`${p.name} se movi√≥ a (${rTo},${cTo})`);
          if (p.template === "zorro") p._justMoved = true;
          updateSelectedInfo();
          renderBoard();
          clearHighlights();
          currentAction = null;
          checkEndGameConditions();
        }

        function highlightAttackOptions(piece) {
          clearHighlights();
          const targets = getAdjacentEnemies(piece);
          targets.forEach((t) => {
            const el = document.getElementById(coordToId(t.r, t.c));
            if (el) el.classList.add("highlight");
          });
          if (targets.length === 0) {
            alert("No hay enemigos adyacentes para atacar");
            currentAction = null;
          }
        }

        function getAdjacentEnemies(piece) {
          const list = [];
          for (const id in state.pieces) {
            const q = state.pieces[id];
            if (q.id === piece.id) continue;
            const dist = Math.abs(piece.r - q.r) + Math.abs(piece.c - q.c);
            if (dist === 1) list.push(q);
          }
          return list;
        }

        function attemptAttackOnTile(attackerId, rTarget, cTarget) {
          if (state.actionsLeft <= 0) {
            alert("No tienes acciones. Finaliza turno.");
            currentAction = null;
            clearHighlights();
            return;
          }
          const attacker = state.pieces[attackerId];
          if (!attacker) return;
          const target = Object.values(state.pieces).find(
            (p) => p.r === rTarget && p.c === cTarget
          );
          if (!target) {
            alert("No hay objetivo");
            currentAction = null;
            clearHighlights();
            return;
          }
          const dist =
            Math.abs(attacker.r - target.r) + Math.abs(attacker.c - target.c);
          if (dist > 1) {
            alert("Solo se puede atacar a enemigos adyacentes");
            currentAction = null;
            clearHighlights();
            return;
          }

          const dice = rollDice();
          state.dice = dice;
          const diceEl = $("#board_diceResult");
          if (diceEl) diceEl.innerText = dice;
          logAppend(`${attacker.name} atac√≥ a ${target.name} ‚Äî Dado: ${dice}`);
          let success = dice >= 4;

          if (
            target.template === "zarigueya" &&
            !target.zarigFirstDefenseUsed
          ) {
            target.zarigFirstDefenseUsed = true;
            success = false;
            logAppend(`¬°La Zarig√ºeya esquiv√≥ el primer ataque!`);
          }

          if (target.template === "robotAliado") {
            const cnt = target.allyBlockCounter || 0;
            if (cnt % 3 === 0) {
              target.allyBlockCounter = cnt + 1;
              success = false;
              logAppend(`El Robot Aliado bloque√≥ el ataque (habilidad).`);
            } else {
              target.allyBlockCounter = cnt + 1;
            }
          }

          if (success) {
            let damage = 1;
            if (attacker.template === "oso") damage = 2;
            if (attacker.template === "zorro" && attacker._justMoved)
              damage = 2;
            target.hp -= damage;
            logAppend(
              `Impacto: ${damage} da√±o a ${target.name}. HP ahora ${target.hp}`
            );
            if (target.hp <= 0) {
              logAppend(`${target.name} ha sido eliminado.`);
              const wasPato = target.template === "pato";
              delete state.pieces[target.id];
              if (wasPato) {
                declareWinner(
                  "Robots",
                  `El Pato fue capturado en turno ${state.turno}.`
                );
                return;
              }
            }
          } else {
            logAppend(`El ataque fall√≥.`);
          }

          state.actionsLeft--;
          attacker._justMoved = false;
          currentAction = null;
          clearHighlights();
          renderBoard();
          updateSelectedInfo();
          checkEndGameConditions();
        }

        /* ====== Habilidades (simplificadas) ====== */
        function useAbility(id) {
          if (state.actionsLeft <= 0) {
            alert("No tienes acciones. Finaliza turno.");
            return;
          }
          const p = state.pieces[id];
          if (!p) return;
          const tpl = p.template;
          if (tpl === "zarigueya") {
            p.zarigFirstDefenseUsed = false;
            logAppend(
              `${p.name} se prepara para esquivar su primer ataque (habilidad activada).`
            );
          } else if (tpl === "robotAliado") {
            p.allyBlockCounter = (p.allyBlockCounter || 0) + 1;
            logAppend(
              `${p.name} carga su bloqueo (contador ahora ${p.allyBlockCounter}).`
            );
          } else {
            if (p.kind === "animal" && p.hp < CHARACTER_TEMPLATES[tpl].hp) {
              p.hp += 1;
              logAppend(
                `${p.name} us√≥ habilidad y recuper√≥ 1 HP (ahora ${p.hp}).`
              );
            } else {
              logAppend(
                `${p.name} intent√≥ usar habilidad, no aplicable ahora.`
              );
            }
          }
          state.actionsLeft--;
          renderBoard();
          updateSelectedInfo();
          checkEndGameConditions();
        }

        /* ====== Turnos y condiciones de victoria ====== */
        function endTurn() {
          for (const id in state.pieces) {
            state.pieces[id].movedThisTurn = false;
            if (state.pieces[id]._justMoved)
              state.pieces[id]._justMoved = false;
            if (state.pieces[id].template === "robotAliado") {
              state.pieces[id].allyBlockCounter =
                (state.pieces[id].allyBlockCounter || 0) + 1;
            }
          }
          state.turno++;
          state.currentSide =
            state.currentSide === "Animales" ? "Robots" : "Animales";
          state.actionsLeft = 1;
          const diceEl = $("#board_diceResult");
          if (diceEl) diceEl.innerText = "‚Äî";
          logAppend(
            `Fin de turno. Avanza a turno ${state.turno} ‚Äî Ahora juegan: ${state.currentSide}`
          );
          state.selected = null;
          currentAction = null;
          renderBoard();
          updateSelectedInfo();

          if (state.turno > MAX_TURNS) {
            const patoAlive = Object.values(state.pieces).some(
              (p) => p.template === "pato"
            );
            if (patoAlive)
              declareWinner(
                "Animales",
                `Se lleg√≥ a ${MAX_TURNS} turnos y el Pato sigue vivo.`
              );
            else
              declareWinner(
                "Robots",
                `Se lleg√≥ a ${MAX_TURNS} y el Pato fue eliminado.`
              );
          }
        }

        function declareWinner(side, reason) {
          renderBoard();
          logAppend(`¬°¬°Victoria de ${side}!! Motivo: ${reason}`);
          alert(`Victoria de ${side}!\n\n${reason}`);
          state.actionsLeft = 0;
        }

        /* ====== Comprobaci√≥n fin de juego por eliminaci√≥n robots o pato ====== */
        function checkEndGameConditions() {
          const anyRobots = Object.values(state.pieces).some(
            (p) => p.kind === "robot"
          );
          const patoAlive = Object.values(state.pieces).some(
            (p) => p.template === "pato"
          );
          if (!anyRobots) {
            declareWinner("Animales", "Todos los robots han sido eliminados.");
            return;
          }
          if (!patoAlive) {
            declareWinner("Robots", "El Pato fue capturado.");
            return;
          }
        }

        /* ====== Inicializaci√≥n ====== */
        function initGame() {
          state.turno = 1;
          state.currentSide = "Animales";
          state.actionsLeft = 1;
          state.dice = null;
          state.log = [];
          seedBoard();
          placeInitialPieces();
          renderBoard();
          updateSelectedInfo();
          const diceEl = $("#board_diceResult");
          if (diceEl) diceEl.innerText = "‚Äî";
          logAppend("Juego iniciado. Animales comienzan.");
        }

        // start game after DOM is ready (root exists already)
        initGame();
      })();
    </script>
    <!-- ========================= END GAME SCRIPT ========================= -->
  </body>
</html>
